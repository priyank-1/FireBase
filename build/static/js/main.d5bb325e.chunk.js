(this["webpackJsonpunichat-template"]=this["webpackJsonpunichat-template"]||[]).push([[0],{141:function(e,t,a){e.exports=a(365)},146:function(e,t,a){},365:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(37),l=a.n(r),i=(a(146),a(53)),o=a(6),s=a(73),u=a.n(s);a(147);const m=u.a.initializeApp({apiKey:"AIzaSyC_5anaqAms7oObTqMvRGTe7imMwksoFWw",authDomain:"freechat-212e2.firebaseapp.com",projectId:"freechat-212e2",storageBucket:"freechat-212e2.appspot.com",messagingSenderId:"865211769861",appId:"1:865211769861:web:685bbaf122263089f7a86c"}).auth(),h=c.a.createContext(),p=e=>{let{children:t}=e;const[a,r]=Object(n.useState)(!0),[l,i]=Object(n.useState)(null),s=Object(o.f)();Object(n.useEffect)(()=>{m.onAuthStateChanged(e=>{i(e),r(!1),e&&s.push("/chats")})},[l,s]);const u={user:l};return c.a.createElement(h.Provider,{value:u},!a&&t)};var d=a(139),f=a(75),g=a.n(f);var b=()=>{const e=Object(n.useRef)(!1),t=Object(o.f)(),{user:a}=Object(n.useContext)(h),[r,l]=Object(n.useState)(!0);return Object(n.useEffect)(()=>{if(!e.current){if(e.current=!0,!a||null===a)return void t.push("/");g.a.get("https://api.chatengine.io/users/me/",{headers:{"project-id":"15feec25-200f-4fd4-8c04-919d2e3f2af3","user-name":a.email,"user-secret":a.uid}}).then(()=>l(!1)).catch(()=>{let e=new FormData;e.append("email",a.email),e.append("username",a.email),e.append("secret",a.uid),(async e=>{const t=await fetch(e),a=await t.blob();return new File([a],"userPhoto.jpg",{type:"image/jpeg"})})(a.photoURL).then(t=>{e.append("avatar",t,t.name),g.a.post("https://api.chatengine.io/users/",e,{headers:{"private-key":"9ff7dd53-ddf7-49e8-a7c7-1e8a6f501251"}}).then(()=>l(!1)).catch(e=>console.log(e))})})}},[a,t]),!a||r?"Loading...":c.a.createElement("div",{className:"chats-page"},c.a.createElement("div",{className:"nav-bar"},c.a.createElement("div",{className:"logo-tab"},"FreeChat"),c.a.createElement("div",{className:"logout-tab",onClick:async()=>{await m.signOut(),t.push("/")}},"LogOut")),c.a.createElement(d.d,{height:" calc(100vh - 66px)",projectID:"15feec25-200f-4fd4-8c04-919d2e3f2af3",userName:a.email,userSecret:a.uid}))},E=a(367),v=a(368),j=a(76),w=a.n(j);var O=()=>c.a.createElement("div",{id:"login-page"},c.a.createElement("div",{id:"login-card"},c.a.createElement("h2",null,"Welcome to FreeChat!"),c.a.createElement("div",{className:"login-button google",onClick:()=>m.signInWithRedirect(new w.a.auth.GoogleAuthProvider)},c.a.createElement(E.a,null)," Sign In with Google"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",{className:"login-button facebook",onClick:()=>m.signInWithRedirect(new w.a.auth.FacebookAuthProvider)},c.a.createElement(v.a,null)," Sign In with Facebook")));var k=function(){return c.a.createElement("div",{style:{fontFamily:"Avenir"}},c.a.createElement(i.a,null,c.a.createElement(p,null,c.a.createElement(o.c,null,c.a.createElement(o.a,{path:"/chats",component:b}),c.a.createElement(o.a,{path:"/",component:O})))))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),document.getElementById("root"))}},[[141,1,2]]]);
//# sourceMappingURL=main.d5bb325e.chunk.js.map